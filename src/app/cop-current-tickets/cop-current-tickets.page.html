<ion-content class="ticket-detail-page">
  <!-- Logo -->
  <ion-header>
    <div class="logo-container">
      <img src="assets/img/logo.jpg" alt="Logo" />
    </div>
  </ion-header>

  <!-- Header -->
  <div class="ticket-header">
    <ion-icon name="chevron-back-outline" routerLink="/corprate-tickets" class="back-icon"></ion-icon>
    <h2>Ticket Information</h2>
  </div>

  <!-- Ticket ID -->
  <div class="ticket-id">
    Ticket ID: <span>{{ impact.TicketID || 'Not Available' }}</span>
  </div>

  <!-- Ticket Info Card -->
  <ion-card class="ticket-card">
    <ion-grid>
      <!-- Row 1 -->
      <ion-row>
        <ion-col size="6" class="ticket-box">
          <p>Type</p>
          <h3>{{ impact.Type || 'Not Set' }}</h3>
        </ion-col>
        <ion-col size="6" class="ticket-box">
          <p>Branch</p>
          <h3>{{ impact.BranchSite || 'Not Set' }}</h3>
        </ion-col>
      </ion-row>

      <!-- Row 2 -->
      <ion-row>
        <ion-col size="6" class="ticket-box">
          <p>Company</p>
          <h3>{{ impact.CompanyName || 'Not Set' }}</h3>
        </ion-col>
        <ion-col size="6" class="ticket-box">
          <p>Employee Name</p>
          <h3>{{ impact.EmployeeName || 'Not Set' }}</h3>
        </ion-col>
      </ion-row>

      <!-- Row 3 -->
      <ion-row>
        <ion-col size="6" class="ticket-box">
          <p>Status</p>
          <h3>
            <ion-chip style="margin-left: -5px;" [color]="impact.Status === 'Open' ? 'success' : impact.Status === 'Pending' ? 'warning' : 'danger'">
              {{ impact.Status || 'Not Set' }}
            </ion-chip>
          </h3>
        </ion-col>
        <ion-col size="6" class="ticket-box">
          <p>Due Date</p>
          <h3>{{ impact.DueDate || 'Not Set' }}</h3>
        </ion-col>
      </ion-row>

      <!-- Row 4 -->
      <ion-row>
        <ion-col size="6" class="ticket-box">
          <p>Priority</p>
          <h3>
            <ion-chip [color]="impact.Priority === 'High' ? 'danger' : impact.Priority === 'Medium' ? 'warning' : 'success'">
              {{ impact.Priority || 'Not Set' }}
            </ion-chip>
          </h3>
        </ion-col>
        <ion-col size="6" class="ticket-box">
          <p>Booking Date</p>
          <h3>{{ impact.CreatedDate || 'Not Set' }}</h3>
        </ion-col>
      </ion-row>

      <!-- Row 5 -->
      <ion-row>
        <ion-col size="6" class="ticket-box">
          <p>Booking Time</p>
          <h3>{{ impact.CreatedTime || 'Not Set' }}</h3>
        </ion-col>
        <ion-col size="6" class="ticket-box">
          <p>Client Ticket ID</p>
          <h3>{{ impact.ClientTicketID || 'Not Set' }}</h3>
        </ion-col>
      </ion-row>

      <!-- Conditional Section for R&M -->
      <ng-container *ngIf="impact.Type === 'R&M'">
        <ion-row>
          <ion-col size="6" class="ticket-box">
            <p>Service</p>
            <h3>{{ impact.Service || 'Not Set' }}</h3>
          </ion-col>
          <ion-col size="6" class="ticket-box">
            <p>Subservice</p>
            <h3>{{ impact.Subservice || 'Not Set' }}</h3>
          </ion-col>
        </ion-row>
      </ng-container>

      <!-- Conditional Section for AMC -->
      <ng-container *ngIf="impact.Type === 'AMC'">
        <ion-row>
          <ion-col size="6" class="ticket-box">
            <p>Equipment Name</p>
            <h3>{{ impact.EquipmentName || 'Not Set' }}</h3>
          </ion-col>
          <ion-col size="6" class="ticket-box">
            <p>Category Name</p>
            <h3>{{ impact.CategoryName || 'Not Set' }}</h3>
          </ion-col>
        </ion-row>
      </ng-container>

      <!-- Message (Full Width) -->
      <ion-row>
        <ion-col size="12" class="ticket-box full-width">
          <p>Message</p>
          <h3>{{ impact.Message || 'No message' }}</h3>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card>

  <!-- Finance View -->
  <div *ngIf="costly" class="finance-cost" routerLink="/finance-cost">
    <div>Finance Cost</div>
    <div class="view">View</div>
  </div>

  <!-- Branch Address (Full Width) -->
  <ion-row>
    <ion-col size="12" class="ticket-box address-box">
      <p>Branch Address</p>
      <div class="address-container">
        <ion-icon name="location-outline" class="address-icon"></ion-icon>
        <h3 class="branch-address">{{ impact.BranchAddress1 || 'Not Set' }}</h3>
      </div>
    </ion-col>
  </ion-row>

  <!-- Action Buttons -->
  <div class="button-footer">
    <ion-button expand="block" *ngIf="Change_Ticket_Status" (click)="route_to_profile_answer_screen(BookingID)" color="primary">
      Change Ticket Status
    </ion-button>
    <ion-button expand="block" *ngIf="Start_Work" [ngClass]="{ 'gray-button': !button }" (click)="route_to_profile_answer_screen(BookingID)" color="success">
      Start Work
    </ion-button>
    <ion-button expand="block" *ngIf="closer" [disabled]="!button" class="gray-button">
      This Ticket has Been Closed
    </ion-button>
    <ion-button expand="block" *ngIf="submit_For_closer" routerLink="/technician" color="secondary">
      View Details
    </ion-button>
  </div>
</ion-content>
